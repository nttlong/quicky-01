<%!
    #_style="width:300px;"
%>
    <%inherit file="../../commons/dialog_save.html"/>

<%block name="modal_body">
<div class="col-md-{{col_group}} col-sm-{{col_group}}">
    <collapse-box class="zb-form-common" title="${get_res('plan','Kế hoạch')}">
        <div class="col-md-{{col}}">
            <div class="form-group zb-form-group">
                <label class="col-sm-5 zb-form-label">Mục tiêu</label>
                <div class="col-sm-7">
                    <input-text ng-model="">
                </div>
            </div>
        </div>
        <div class="col-md-{{col}}">
            <div class="form-group zb-form-group">
                <label class="col-sm-5 zb-form-label">Trọng số</label>
                <div class="col-sm-7">
                    <input-text ng-model="">
                </div>
            </div>
        </div>
        <div class="col-md-{{col}}">
            <div class="form-group zb-form-group">
                <label class="col-sm-5 zb-form-label">Chỉ tiêu</label>
                <div class="col-sm-7">
                    <input-text ng-model="">
                </div>
            </div>
        </div>
    </collapse-box>
</div>
<div class="col-md-{{ 12 - col_group}} col-sm-{{ 12 - col_group}}">
    <collapse-box class="zb-form-common" title="Thực hiện">
        <div class="col-md-{{col}}">
            <div class="form-group zb-form-group">
                <!--Trọng số-->
                <label class="col-sm-5 zb-form-label">Thực hiện</label>
                <div class="col-sm-7">
                    <input-text ng-model="">
                </div>
            </div>
        </div>
        <div class="col-md-{{col}}">
            <div class="form-group zb-form-group">
                <!--Trọng số-->
                <label class="col-sm-5 zb-form-label">% Hoàn thành</label>
                <div class="col-sm-7">
                    <input-text ng-model="">
                </div>
            </div>
        </div>
        <div class="col-md-{{col}}">
            <div class="form-group zb-form-group">
                <!--Tên khác-->
                <label class="col-sm-5 zb-form-label">Ngày hoàn thành</label>
                <div class="col-sm-7">
                    <date-picker ng-model="">
                </div>
            </div>
        </div>
    </collapse-box>
</div>
<div class="col-md-12 col-xs-12" style="margin-top: 25px;">
    <collapse-box class="zb-form-common" title="Chi tiết thực hiện">
        <toolbar>
           <input-text-icon icon="bowtie-icon bowtie-search"
                        on-click="onSearch"></input-text-icon>
            <button class="zb-btn">
                <i class="bowtie-icon bowtie-search-filter"></i>
            </button>
            <button ng-click="event.onAdd()" class="zb-btn zb-btn-o-green">
                <i class="bowtie-icon bowtie-math-plus"></i>
            </button>
            <button ng-click="onEdit()" class="zb-btn zb-btn-o-blue">
                <i class="bowtie-icon bowtie-edit-outline"></i>
            </button>
            <button ng-click="onDelete()" class="zb-btn zb-btn-o-red">
                <i class="bowtie-icon bowtie-trash"></i>
            </button>
            <button class="zb-btn" ng-click="onExport()">
                    <i class="bowtie-icon bowtie-transfer-upload"></i>
            </button>
            <button class="zb-btn" ng-click="onImport()">
                <i class="bowtie-icon bowtie-transfer-download"></i>
            </button>
        </toolbar>
        <div class="col-sm-12">
            <!--Ghi chú-->
            <div class="form-group zb-form-group">
                <div class="col-sm-12 no-padding">
                    <table class="table">
                       <thead>
                         <tr>
                           <th>Ngày</th>
                           <th>Thực hiện</th>
                           <th>Kế hoạch hành động</th>
                         </tr>
                       </thead>
                       <tbody>
                         <tr>
                           <td>John</td>
                           <td>Doe</td>
                           <td>john@example.com</td>
                         </tr>
                         <tr>
                           <td>Mary</td>
                           <td>Moe</td>
                           <td>mary@example.com</td>
                         </tr>
                         <tr>
                           <td>July</td>
                           <td>Dooley</td>
                           <td>july@example.com</td>
                         </tr>
                       </tbody>
                     </table>
                </div>
            </div>
        </div>
    </collapse-box>
</div>
</%block>

<%block name="modal_script">
<script>
    (function (scope) {
        scope.__mode = scope.$parent.mode;
        scope.title = scope.$parent.headerTitle;
        scope.col = 12;
        scope.col_group = 6;
        scope.onResizeDialog = onResizeDialog;

        scope.event = {
            onAdd: function(){
                openDialog("Chi tiết thực hiện", 'updateTarget/form/editDetail', function(){}, "editDetail");
            }
        }

        function onResizeDialog() {
            $dialog.fullScreen();
            scope.col = scope.col == 12 ? 6 : 12;
            scope.col_group = scope.col_group == 6 ? 8 : 6;
        }

        /**
         * Hàm mở dialog
         * @param {string} title Tittle của dialog
         * @param {string} path Đường dẫn file template
         * @param {function} callback Xử lí sau khi gọi dialog
         * @param {string} id Id của form dialog, default = 'myModal'
         */
        function openDialog(title, path, callback, id = 'myModal') {
            //check tồn tại của form dialog theo id
            if ($('#' + id).length === 0) {
                scope.headerTitle = title;
                //Đặt ID cho form dialog
                dialog(scope).url(path).done(function () {
                    callback();
                    //Set draggable cho form dialog
                    $dialog.draggable();
                });
            }
        }
    });
</script>

</%block>